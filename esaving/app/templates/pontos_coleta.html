{% extends 'base.html' %}
{% load static %}

{% block title %}Mapa de Coleta{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row mb-4 text-center">
        <div class="col-lg-8 mx-auto">
            <h2 class="text-success fw-bold">Encontre um Ponto de Coleta</h2>
            <p class="text-muted">Descarte seu lixo eletrônico de forma responsável perto de você.</p>
            
            <form method="get" action="{% url 'mapa' %}" class="d-flex mt-4 shadow-sm rounded-pill overflow-hidden">
                <input class="form-control border-0 px-4 py-3" type="search" name="q" 
                       placeholder="Busque por bairro, rua ou nome do local..." 
                       value="{{ query }}" aria-label="Pesquisar">
                <button class="btn btn-success px-4" type="submit">
                    Pesquisar
                </button>
                {% if query %}
                    <a href="{% url 'mapa' %}" class="btn btn-secondary px-3 d-flex align-items-center">X</a>
                {% endif %}
            </form>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card border-0 shadow-lg overflow-hidden">
                <div id="map" style="height: 600px; width: 100%; z-index: 1;"></div>
            </div>
            
            <div class="mt-3 text-end text-muted small">
                <i class="bi bi-geo-alt-fill text-success"></i> Mostrando pontos de coleta ativos.
            </div>
        </div>
    </div>

    {{ pontos_json|json_script:"pontos-data" }}
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/scriptMap.js' %}"></script>
{% endblock %}
